/api/v1/playlists:
  post:
    summary: Create a playlist
    description: Creates a new empty playlist for the authenticated user.
    tags: [Playlists]
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - name
              - description
            properties:
              name: { type: string, description: Playlist name }
              description: { type: string, description: Playlist description }
    responses:
      201:
        description: Playlist created successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode: { type: number, example: 201 }
                data:
                  type: object
                  properties:
                    _id: { type: string }
                    name: { type: string }
                    description: { type: string }
                    owner: { type: string }
                    videos:
                      type: array
                      items: { type: string }
                    createdAt: { type: string, format: date-time }
                message: { type: string, example: "Playlist created successfully" }
      400:
        description: Bad Request - Name and description are required
      401:
        description: Unauthorized - User not authenticated
      500:
        description: Internal Server Error - Failed to create playlist

/api/v1/playlists/{playlistId}:
  get:
    summary: Get playlist by ID
    description: Fetches a single playlist by ID including all its videos with full video details and owner information.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: playlistId
        required: true
        schema: { type: string }
        description: The ID of the playlist
    responses:
      200:
        description: Playlist fetched successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode: { type: number, example: 200 }
                data:
                  type: object
                  properties:
                    _id: { type: string }
                    name: { type: string }
                    description: { type: string }
                    owner:
                      type: object
                      properties:
                        userName: { type: string }
                        fullname: { type: string }
                        avatar: { type: string }
                    videos:
                      type: array
                      items:
                        type: object
                        properties:
                          _id: { type: string }
                          title: { type: string }
                          thumbnail: { type: string }
                          duration: { type: number }
                          owner:
                            type: object
                            properties:
                              userName: { type: string }
                              fullname: { type: string }
                              avatar: { type: string }
                message: { type: string, example: "Playlist fetched successfully" }
      400:
        description: Bad Request - Invalid playlist ID
      401:
        description: Unauthorized - User not authenticated
      404:
        description: Not Found - Playlist not found

  patch:
    summary: Update a playlist
    description: Updates the name and description of a playlist. Only the playlist owner can update it.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: playlistId
        required: true
        schema: { type: string }
        description: The ID of the playlist to update
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - name
              - description
            properties:
              name: { type: string, description: Updated playlist name }
              description: { type: string, description: Updated playlist description }
    responses:
      200:
        description: Playlist updated successfully
      400:
        description: Bad Request - Invalid playlist ID or missing fields
      401:
        description: Unauthorized - User not authenticated
      403:
        description: Forbidden - Not authorized to update this playlist
      404:
        description: Not Found - Playlist not found

  delete:
    summary: Delete a playlist
    description: Permanently deletes a playlist by its ID. Only the playlist owner can delete it.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: playlistId
        required: true
        schema: { type: string }
        description: The ID of the playlist to delete
    responses:
      200:
        description: Playlist deleted successfully
      400:
        description: Bad Request - Invalid playlist ID
      401:
        description: Unauthorized - User not authenticated
      403:
        description: Forbidden - Not authorized to delete this playlist
      404:
        description: Not Found - Playlist not found

/api/v1/playlists/add/{videoId}/{playlistId}:
  patch:
    summary: Add a video to a playlist
    description: Adds a video to a specified playlist. Only the playlist owner can modify it. Prevents adding duplicate videos.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: videoId
        required: true
        schema: { type: string }
        description: The ID of the video to add
      - in: path
        name: playlistId
        required: true
        schema: { type: string }
        description: The ID of the target playlist
    responses:
      200:
        description: Video added to playlist successfully
      400:
        description: Bad Request - Invalid IDs or video already exists in the playlist
      401:
        description: Unauthorized - User not authenticated
      403:
        description: Forbidden - Not authorized to modify this playlist
      404:
        description: Not Found - Playlist not found

/api/v1/playlists/remove/{videoId}/{playlistId}:
  patch:
    summary: Remove a video from a playlist
    description: Removes a specific video from a playlist. Only the playlist owner can modify it.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: videoId
        required: true
        schema: { type: string }
        description: The ID of the video to remove
      - in: path
        name: playlistId
        required: true
        schema: { type: string }
        description: The ID of the playlist
    responses:
      200:
        description: Video removed from playlist successfully
      400:
        description: Bad Request - Invalid playlist or video ID
      401:
        description: Unauthorized - User not authenticated
      403:
        description: Forbidden - Not authorized to modify this playlist
      404:
        description: Not Found - Playlist not found

/api/v1/playlists/user/{userId}:
  get:
    summary: Get all playlists for a user
    description: Fetches all playlists created by a specific user, including video count and thumbnail/title/duration previews of each video.
    tags: [Playlists]
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: userId
        required: true
        schema: { type: string }
        description: The ID of the user whose playlists to fetch
    responses:
      200:
        description: User playlists fetched successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode: { type: number, example: 200 }
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      _id: { type: string }
                      name: { type: string }
                      description: { type: string }
                      totalVideos: { type: number }
                      videos:
                        type: array
                        items:
                          type: object
                          properties:
                            _id: { type: string }
                            title: { type: string }
                            thumbnail: { type: string }
                            duration: { type: number }
                message: { type: string, example: "User playlists fetched successfully" }
      400:
        description: Bad Request - Invalid user ID
      401:
        description: Unauthorized - User not authenticated
